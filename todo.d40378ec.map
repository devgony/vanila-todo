{"version":3,"sources":["src/todo.js"],"names":["jsForm","document","querySelector","jsInput","pending","done","pendingTodos","doneTodos","mapper","obj","dom","init","addEventListener","handleSubmit","loadTodos","status","loadedTodos","JSON","parse","localStorage","getItem","k","event","preventDefault","value","addTodo","id","parseInt","Object","keys","sort","reverse","setItem","stringify","createLi","key","newLi","appendChild","createElement","switchBtn","innerText","className","handleSwitch","delBtn","handleDelete","parentNode","target","li","log","lastChild","targetStatus","deleteTodo","remove"],"mappings":";AAGA,IAAMA,EAASC,SAASC,cAAc,YAChCC,EAAUH,EAAOE,cAAc,SAC/BE,EAAUH,SAASC,cAAc,YACjCG,EAAOJ,SAASC,cAAc,SAChCI,EAAe,GACfC,EAAY,GACVC,EAAS,CACJ,QAAA,CAAEC,IAAKH,EAAcI,IAAKN,GAC7B,KAAA,CAAEK,IAAKF,EAAWG,IAAKL,IAGzBM,EAAO,WACD,EAAA,WACA,EAAA,QACHC,EAAAA,iBAAiB,SAAUC,IAG9BC,EAAY,SAACC,GACXC,IAAAA,EAAcC,KAAKC,MAAMC,aAAaC,QAAQL,IAM/C,IAAA,IAAIM,KAJIN,EAAAA,GAAQN,IADfO,GAGqB,GAEbR,EAAOO,GAAQN,IAClBM,EAAAA,EAAQM,EAAGb,EAAOO,GAAQN,IAAIY,KAIrCR,EAAe,SAACS,GACdC,EAAAA,iBACE,EAAA,UAAWpB,EAAQqB,OACnBA,EAAAA,MAAQ,IAGZC,EAAU,SAACV,EAAQS,GAEnBE,IAAAA,GACDC,SAASC,OAAOC,KAAKrB,EAAOO,GAAQN,KAAKqB,OAAOC,UAAU,KAAO,GAAK,EAChEhB,EAAAA,EAAQW,EAAIF,GACdT,EAAAA,GAAQN,IAAIiB,GAAMF,EACZQ,aAAAA,QAAQjB,EAAQE,KAAKgB,UAAUzB,EAAOO,GAAQN,OAGvDyB,EAAW,SAACnB,EAAQoB,EAAKX,GACvBd,IACA0B,EADM5B,EAAOO,GAAQL,IACT2B,YAAYpC,SAASqC,cAAc,OAE/CZ,EAAAA,GAAKS,EACLI,IAAAA,EAAYH,EAAMC,YAAYpC,SAASqC,cAAc,WACjDE,EAAAA,UAAY,IACZC,EAAAA,UAAY,iBACZ7B,EAAAA,iBAAiB,QAAS8B,GAC9BC,IAAAA,EAASP,EAAMC,YAAYpC,SAASqC,cAAc,WACjDE,EAAAA,UAAY,IACZC,EAAAA,UAAY,cACZ7B,EAAAA,iBAAiB,QAASgC,GAC3BP,EAAAA,YAAYpC,SAASqC,cAAc,MAAME,UAAYhB,GAGvDoB,EAAe,SAA4B,GAAjBC,IAAAA,EAARC,EAAAA,OAClB/B,EAAS8B,EAAWA,WAAWA,WAAWJ,UAC1CM,EAAKF,EAAWA,WACZG,QAAAA,IAAID,EAAIA,EAAGrB,GAAIX,GACZgC,EAAAA,EAAGrB,GAAIqB,EAAIhC,IAGlB2B,EAAe,SAA4B,GAAjBG,IAAAA,EAARC,EAAAA,OAClB/B,EAAS8B,EAAWA,WAAWA,WAAWJ,UAC1CM,EAAKF,EAAWA,WAChBrB,EAAQuB,EAAGE,UAAUT,UACjBQ,QAAAA,IAAIjC,EAAQgC,EAAIvB,GACbuB,EAAAA,EAAGrB,GAAIqB,EAAIhC,GAEdmC,EADsB,YAAXnC,EAAuB,OAAS,UAC7BS,IAGlB2B,EAAa,SAACzB,EAAIhB,EAAKK,GACnBiC,QAAAA,IAAIjC,EAAQP,EAAOO,GAAQN,YAK5BD,EAAOO,GAAQN,IAAIiB,GACbM,aAAAA,QAAQjB,EAAQE,KAAKgB,UAAUzB,EAAOO,GAAQN,MACvD2C,EAAAA,UAGNzC","file":"todo.d40378ec.map","sourceRoot":"..","sourcesContent":["// <⚠️ DONT DELETE THIS ⚠️>\n// import \"./styles.css\";\n// <⚠️ /DONT DELETE THIS ⚠️>\nconst jsForm = document.querySelector(\".js-form\");\nconst jsInput = jsForm.querySelector(\"input\");\nconst pending = document.querySelector(\".pending\");\nconst done = document.querySelector(\".done\");\nlet pendingTodos = {};\nlet doneTodos = {};\nconst mapper = {\n  pending: { obj: pendingTodos, dom: pending },\n  done: { obj: doneTodos, dom: done }\n};\n\nconst init = () => {\n  loadTodos(\"pending\");\n  loadTodos(\"done\");\n  jsForm.addEventListener(\"submit\", handleSubmit);\n};\n\nconst loadTodos = (status) => {\n    let loadedTodos = JSON.parse(localStorage.getItem(status));\n    if (loadedTodos) {\n        mapper[status].obj = loadedTodos;\n    } else {\n        mapper[status].obj = {};\n    }\n  for (var k in mapper[status].obj) {\n    createLi(status, k, mapper[status].obj[k]);\n  }\n};\n\nconst handleSubmit = (event) => {\n  event.preventDefault();\n  addTodo(\"pending\", jsInput.value);\n  jsInput.value = \"\";\n};\n\nconst addTodo = (status, value) => {\n  // let id = Object.keys(mapper[status].obj).length + 1;\n  let id =\n    (parseInt(Object.keys(mapper[status].obj).sort().reverse()[0]) || 0) + 1;\n  createLi(status, id, value);\n  mapper[status].obj[id] = value;\n  localStorage.setItem(status, JSON.stringify(mapper[status].obj));\n};\n\nconst createLi = (status, key, value) => {\n  const dom = mapper[status].dom;\n  const newLi = dom.appendChild(document.createElement(\"li\"));\n  // let id = dom.childElementCount - 1;\n  newLi.id = key;\n  const switchBtn = newLi.appendChild(document.createElement(\"button\"));\n  switchBtn.innerText = \"✅\";\n  switchBtn.className = \"switch-btn btn\";\n  switchBtn.addEventListener(\"click\", handleSwitch);\n  const delBtn = newLi.appendChild(document.createElement(\"button\"));\n  delBtn.innerText = \"❌\";\n  delBtn.className = \"del-btn btn\";\n  delBtn.addEventListener(\"click\", handleDelete);\n  newLi.appendChild(document.createElement(\"p\")).innerText = value;\n};\n\nconst handleDelete = ({ target: parentNode }) => {\n  let status = parentNode.parentNode.parentNode.className;\n  let li = parentNode.parentNode;\n  console.log(li, li.id, status);\n  deleteTodo(li.id, li, status);\n};\n\nconst handleSwitch = ({ target: parentNode }) => {\n  let status = parentNode.parentNode.parentNode.className;\n  let li = parentNode.parentNode;\n  let value = li.lastChild.innerText;\n  console.log(status, li, value);\n  deleteTodo(li.id, li, status);\n  let targetStatus = status === \"pending\" ? \"done\" : \"pending\";\n  addTodo(targetStatus, value);\n};\n\nconst deleteTodo = (id, dom, status) => {\n  console.log(status, mapper[status].obj);\n  // mapper[status].obj = mapper[status].obj.filter((t, i) => {\n  //   console.log(id, i, i !== parseInt(id));\n  //   return i !== parseInt(id);\n  // });\n  delete mapper[status].obj[id];\n  localStorage.setItem(status, JSON.stringify(mapper[status].obj));\n  dom.remove();\n};\n\ninit();\n"]}