{"version":3,"sources":["src/todo.js"],"names":["jsForm","document","querySelector","jsInput","pending","done","pendingTodos","doneTodos","mapper","obj","dom","init","loadTodos","addEventListener","handleSubmit","status","loadedTodos","JSON","parse","localStorage","getItem","k","createLi","event","preventDefault","addTodo","value","id","parseInt","Object","keys","sort","reverse","setItem","stringify","key","newLi","appendChild","createElement","switchBtn","innerText","className","handleSwitch","delBtn","handleDelete","parentNode","target","li","console","log","deleteTodo","lastChild","remove"],"mappings":";AAGA,IAAMA,EAASC,SAASC,cAAc,YAChCC,EAAUH,EAAOE,cAAc,SAC/BE,EAAUH,SAASC,cAAc,YACjCG,EAAOJ,SAASC,cAAc,SAChCI,EAAe,GACfC,EAAY,GACVC,EAAS,CACbJ,QAAS,CAAEK,IAAKH,EAAcI,IAAKN,GACnCC,KAAM,CAAEI,IAAKF,EAAWG,IAAKL,IAGzBM,EAAO,WACXC,EAAU,WACVA,EAAU,QACVZ,EAAOa,iBAAiB,SAAUC,IAG9BF,EAAY,SAACG,GACXC,IAAAA,EAAcC,KAAKC,MAAMC,aAAaC,QAAQL,IAM/C,IAAA,IAAIM,KAJHb,EAAOO,GAAQN,IADfO,GAGqB,GAEbR,EAAOO,GAAQN,IAC3Ba,EAASP,EAAQM,EAAGb,EAAOO,GAAQN,IAAIY,KAIrCP,EAAe,SAACS,GACpBA,EAAMC,iBACNC,EAAQ,UAAWtB,EAAQuB,OAC3BvB,EAAQuB,MAAQ,IAGZD,EAAU,SAACV,EAAQW,GAEnBC,IAAAA,GACDC,SAASC,OAAOC,KAAKtB,EAAOO,GAAQN,KAAKsB,OAAOC,UAAU,KAAO,GAAK,EACzEV,EAASP,EAAQY,EAAID,GACrBlB,EAAOO,GAAQN,IAAIkB,GAAMD,EACzBP,aAAac,QAAQlB,EAAQE,KAAKiB,UAAU1B,EAAOO,GAAQN,OAGvDa,EAAW,SAACP,EAAQoB,EAAKT,GACvBhB,IACA0B,EADM5B,EAAOO,GAAQL,IACT2B,YAAYpC,SAASqC,cAAc,OAErDF,EAAMT,GAAKQ,EACLI,IAAAA,EAAYH,EAAMC,YAAYpC,SAASqC,cAAc,WAC3DC,EAAUC,UAAY,IACtBD,EAAUE,UAAY,iBACtBF,EAAU1B,iBAAiB,QAAS6B,GAC9BC,IAAAA,EAASP,EAAMC,YAAYpC,SAASqC,cAAc,WACxDK,EAAOH,UAAY,IACnBG,EAAOF,UAAY,cACnBE,EAAO9B,iBAAiB,QAAS+B,GACjCR,EAAMC,YAAYpC,SAASqC,cAAc,MAAME,UAAYd,GAGvDkB,EAAe,SAA4B,GAAjBC,IAAAA,EAARC,EAAAA,OAClB/B,EAAS8B,EAAWA,WAAWA,WAAWJ,UAC1CM,EAAKF,EAAWA,WACpBG,QAAQC,IAAIF,EAAIA,EAAGpB,GAAIZ,GACvBmC,EAAWH,EAAGpB,GAAIoB,EAAIhC,IAGlB2B,EAAe,SAA4B,GAAjBG,IAAAA,EAARC,EAAAA,OAClB/B,EAAS8B,EAAWA,WAAWA,WAAWJ,UAC1CM,EAAKF,EAAWA,WAChBnB,EAAQqB,EAAGI,UAAUX,UACzBQ,QAAQC,IAAIlC,EAAQgC,EAAIrB,GACxBwB,EAAWH,EAAGpB,GAAIoB,EAAIhC,GAEtBU,EAD8B,YAAXV,EAAuB,OAAS,UAC7BW,IAGlBwB,EAAa,SAACvB,EAAIjB,EAAKK,GAC3BiC,QAAQC,IAAIlC,EAAQP,EAAOO,GAAQN,YAK5BD,EAAOO,GAAQN,IAAIkB,GAC1BR,aAAac,QAAQlB,EAAQE,KAAKiB,UAAU1B,EAAOO,GAAQN,MAC3DC,EAAI0C,UAGNzC","file":"todo.293872cf.js","sourceRoot":"..","sourcesContent":["// <⚠️ DONT DELETE THIS ⚠️>\n// import \"./styles.css\";\n// <⚠️ /DONT DELETE THIS ⚠️>\nconst jsForm = document.querySelector(\".js-form\");\nconst jsInput = jsForm.querySelector(\"input\");\nconst pending = document.querySelector(\".pending\");\nconst done = document.querySelector(\".done\");\nlet pendingTodos = {};\nlet doneTodos = {};\nconst mapper = {\n  pending: { obj: pendingTodos, dom: pending },\n  done: { obj: doneTodos, dom: done }\n};\n\nconst init = () => {\n  loadTodos(\"pending\");\n  loadTodos(\"done\");\n  jsForm.addEventListener(\"submit\", handleSubmit);\n};\n\nconst loadTodos = (status) => {\n    let loadedTodos = JSON.parse(localStorage.getItem(status));\n    if (loadedTodos) {\n        mapper[status].obj = loadedTodos;\n    } else {\n        mapper[status].obj = {};\n    }\n  for (var k in mapper[status].obj) {\n    createLi(status, k, mapper[status].obj[k]);\n  }\n};\n\nconst handleSubmit = (event) => {\n  event.preventDefault();\n  addTodo(\"pending\", jsInput.value);\n  jsInput.value = \"\";\n};\n\nconst addTodo = (status, value) => {\n  // let id = Object.keys(mapper[status].obj).length + 1;\n  let id =\n    (parseInt(Object.keys(mapper[status].obj).sort().reverse()[0]) || 0) + 1;\n  createLi(status, id, value);\n  mapper[status].obj[id] = value;\n  localStorage.setItem(status, JSON.stringify(mapper[status].obj));\n};\n\nconst createLi = (status, key, value) => {\n  const dom = mapper[status].dom;\n  const newLi = dom.appendChild(document.createElement(\"li\"));\n  // let id = dom.childElementCount - 1;\n  newLi.id = key;\n  const switchBtn = newLi.appendChild(document.createElement(\"button\"));\n  switchBtn.innerText = \"✅\";\n  switchBtn.className = \"switch-btn btn\";\n  switchBtn.addEventListener(\"click\", handleSwitch);\n  const delBtn = newLi.appendChild(document.createElement(\"button\"));\n  delBtn.innerText = \"❌\";\n  delBtn.className = \"del-btn btn\";\n  delBtn.addEventListener(\"click\", handleDelete);\n  newLi.appendChild(document.createElement(\"p\")).innerText = value;\n};\n\nconst handleDelete = ({ target: parentNode }) => {\n  let status = parentNode.parentNode.parentNode.className;\n  let li = parentNode.parentNode;\n  console.log(li, li.id, status);\n  deleteTodo(li.id, li, status);\n};\n\nconst handleSwitch = ({ target: parentNode }) => {\n  let status = parentNode.parentNode.parentNode.className;\n  let li = parentNode.parentNode;\n  let value = li.lastChild.innerText;\n  console.log(status, li, value);\n  deleteTodo(li.id, li, status);\n  let targetStatus = status === \"pending\" ? \"done\" : \"pending\";\n  addTodo(targetStatus, value);\n};\n\nconst deleteTodo = (id, dom, status) => {\n  console.log(status, mapper[status].obj);\n  // mapper[status].obj = mapper[status].obj.filter((t, i) => {\n  //   console.log(id, i, i !== parseInt(id));\n  //   return i !== parseInt(id);\n  // });\n  delete mapper[status].obj[id];\n  localStorage.setItem(status, JSON.stringify(mapper[status].obj));\n  dom.remove();\n};\n\ninit();\n"]}