{"version":3,"sources":["src/weather.js"],"names":["WEATHER_URL","API_KEY","weather","document","querySelector","getWeather","lat","latitude","lon","longitude","url","fetch","then","res","json","temperature","main","temp","place","name","innerText","saveCoords","coordsObj","localStorage","setItem","JSON","stringify","handleSuccess","coords","console","log","handleError","error","askLocation","navigator","geolocation","getCurrentPosition","loadCoords","parse","getItem","weatherInit"],"mappings":";AAAA,IAAMA,EAAe,mCACfC,EAAU,mCACVC,EAAUC,SAASC,cAAc,eAEjCC,EAAa,SAAqC,GAAzBC,IAAAA,EAAVC,EAAAA,SAA0BC,EAAXC,EAAAA,UAC1BC,EAA4DJ,sDAAAA,OAAAA,EAAWE,SAAAA,OAAAA,EAAaP,WAAAA,OAAAA,EAA1F,iBACAU,MAAMD,GAAKE,KAAK,SAAAC,GAAOA,OAAAA,EAAIC,SAAQF,KAC/B,SAAAE,GACUC,IAAAA,EAAcD,EAAKE,KAAKC,KACxBC,EAAQJ,EAAKK,KACnBjB,EAAQkB,UAAeL,GAAAA,OAAAA,EAAiBG,OAAAA,OAAAA,MAK9CG,EAAa,SAACC,GAChBC,aAAaC,QAAQ,SAAUC,KAAKC,UAAUJ,IAC9CjB,EAAWiB,IAGTK,EAAgB,SAAqC,GAAnCC,IAAAA,EAAAA,EAAAA,OAASrB,EAAAA,EAAAA,SAAUE,EAAAA,EAAAA,UACvCoB,QAAQC,IAAIvB,EAAUE,GACtBY,EAAW,CAACd,SAAAA,EAAUE,UAAAA,KAGpBsB,EAAc,WAChBF,QAAQG,MAAM,0BAGZC,EAAc,WAChBC,UAAUC,YAAYC,mBAAmBT,EAAeI,IAGtDM,EAAa,WACXf,IAAAA,EAAYG,KAAKa,MAAMf,aAAagB,QAAQ,WAC5CjB,GACAO,QAAQC,IAAIR,GACZjB,EAAWiB,IAEXW,KAIFO,EAAc,WAChBH,KAEJG","file":"weather.bfda15de.js","sourceRoot":"..","sourcesContent":["const WEATHER_URL =  \"https://home.openweathermap.org/\"\nconst API_KEY = \"04fbe5903fb0ab8181b13029d8a515c8\"\nconst weather = document.querySelector(\".weather h1\")\n\nconst getWeather = ({latitude: lat, longitude: lon}) => {\n    const url = `http://api.openweathermap.org/data/2.5/weather?lat=${lat}&lon=${lon}&appid=${API_KEY}&units=metric`\n    fetch(url).then(res => res.json()).then(\n        json => {\n            const temperature = json.main.temp;\n            const place = json.name;\n            weather.innerText = `${temperature} @ ${place}`\n        }\n    )\n}\n\nconst saveCoords = (coordsObj) => {\n    localStorage.setItem(\"COORDS\", JSON.stringify(coordsObj));\n    getWeather(coordsObj);\n}\n\nconst handleSuccess = ({coords: {latitude, longitude}}) => {\n    console.log(latitude, longitude);\n    saveCoords({latitude, longitude});\n}\n\nconst handleError = () => {\n    console.error(\"can not get location.\")\n}\n\nconst askLocation = () => {\n    navigator.geolocation.getCurrentPosition(handleSuccess, handleError);\n}\n\nconst loadCoords = () => {\n    let coordsObj = JSON.parse(localStorage.getItem(\"COORDS\"));\n    if (coordsObj) {\n        console.log(coordsObj);\n        getWeather(coordsObj);\n    } else {\n        askLocation();\n    }\n}\n\nconst weatherInit = () => {\n    loadCoords();\n}\nweatherInit();"]}